Valuation
=========

**Method Goals**

| 
| This method aims to return the total price and cancel policies of the selected *Option*. This *Option* **must** be selected in the previous step (*Avail*).

|
**Request Format**

| 
| The *Valuation* request is same that availabilityRQ and add rooms and Mealplan code.

|
**Response Format**

| 
| The returned XML contains the total price and list of cancel policies. Sometimes this method will fail since the selected option at *Avail* time will not be available in this stage. In this case the integration returns an error code 301.

|

*ValuationRQ* Example
---------------------

::

    <ValuationRQ>
        <StartDate>28/01/2014</StartDate>
        <EndDate>29/01/2014</EndDate>
        <MealPlanCode>D</MealPlanCode>
        <HotelCode>10</HotelCode>
        <PaymentType>MerchantPay</PaymentType>
        <OptionType>Hotel</OptionType>
        <Rooms>
            <Room id = "4582" roomCandidateRefId = "1" code = "506" description = "Doble Standard.."/>
        </Rooms>
        <RoomCandidates>
            <RoomCandidate id = "1">
                <Paxes>
                    <Pax age = "30" id = "1"/>
                    <Pax age = "30" id = "2"/>
                </Paxes>
            </RoomCandidate>
        </RoomCandidates>
    </ValuationRQ>

|
*ValuationRQ* Description
-------------------------

+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| Element                                  | Number   | Type      | Description                                                             |
+==========================================+==========+===========+=========================================================================+
| ValuationRQ                              | 1        |           | Root node.                                                              |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| StartDate                                | 1        | String    | Start date to search rates.                                             |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| EndDate                                  | 1        | String    | End date to search rates.                                               |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| MealPlanCode                             | 1        | String    | MealPlan code.                                                          |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| HotelCode                                | 1        | String    | Hotel code.                                                             |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| PaymentType                              | 1        | String    | Indicates the typology of payment.                                      |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| OptionType                               | 1        | String    | Indicates the type of option.                                           |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| Rooms                                    | 1        |           | Rooms of this option ( room list).                                      |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| Rooms/Room                               | 1..n     |           | Detail of room.                                                         |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@id*                                    | 1        | String    | Identifier of the room.                                                 |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@roomCandidateRefId*                    | 1        | Integer   | Identifier of room candidate.                                           |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@code*                                  | 1        | String    | Room code.                                                              |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@description*                           | 1        | String    | Room description.                                                       |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| RoomCandidates                           | 1        |           | Rooms required.                                                         |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| RoomCandidates/RoomCandidate             | 1..n     |           | Room required.                                                          |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@id*                                    | 1        | Integer   | Id of the requested room (starting at 1).                               |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| RoomCandidates/RoomCandidate/Paxes/Pax   | 1..n     |           | Pax required.                                                           |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@age*                                   | 1        | Integer   | Passenger age.                                                          |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@id*                                    | 1        | Integer   | Passenger id (starting at 1).                                           |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| Parameters                               | 0..1     |           | Additional parameters that have been reported in the option (AvailRS)   |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| Parameters/Parameter                     | 0..n     |           | Additional parameter that requires the integration                      |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@key*                                   | 1        | String    | Contains the keyword/Id to identify a parameter.                        |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+
| *@value*                                 | 1        | String    | Contains the value of the parameter                                     |
+------------------------------------------+----------+-----------+-------------------------------------------------------------------------+

| 
*ValuationRS* Example
---------------------

::

    <ValuationRS >
        <Parameters>
            <Parameter key = "bd1" value = "43"/>
        </Parameters>
        <Price currency = "EUR" amount = "36.20" binding = "false" commission = "-1" importeNoComisionable = "0"/>
        <CancelPenalties nonRefundable = "false">
            <CancelPenalty>
                <HoursBefore>48</HoursBefore>
                <Penalty type = "Importe" paymentType = "MerchantPay" currency = "EUR">72.40</Penalty>
            </CancelPenalty>
        </CancelPenalties>
        <Remarks/>
    </ValuationRS>

| 
*ValuationRS* Description
-------------------------

+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Element                                     | Number   | Type      | Description                                                                                                                                             |
+=============================================+==========+===========+=========================================================================================================================================================+
| ValuationRS                                 | 1        |           | Root node.                                                                                                                                              |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Parameters                                  | 0..1     |           | Parameters for additional information.                                                                                                                  |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Parameters/Parameter                        | 1..n     |           | List of parameter.                                                                                                                                      |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@key*                                      | 1        | String    | Contains the keyword/Id to identify a parameter.                                                                                                        |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@value*                                    | 1        | String    | Contains the value of the parameter.                                                                                                                    |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Price                                       | 1        |           | Total price of this valuation.                                                                                                                          |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@currency*                                 | 1        | String    | Currency code.                                                                                                                                          |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@amount*                                   | 1        | Decimal   | Option Amount.                                                                                                                                          |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@binding*                                  | 1        | Boolean   | Identifies if is the price is binding ( When true the sale price returned **must** not be less than the price informed.                                 |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@commission*                               | 1        | Decimal   | Commission ( -1 = not specified (will come indicated with the provider contract ), 0 = net price, X = % of the commission that applies to the amount.   |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| CancelPenalties                             | 0..1     |           | Information of cancellation policies.                                                                                                                   |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@nonRefundable*                            | 1        | Boolean   | Indicate if this option is nonRefundable (true or false).                                                                                               |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| CancelPenalties/CancelPenalty               | 0..n     |           | Listing cancellation penalties.                                                                                                                         |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| CancelPenalties/CancelPenalty/HoursBefore   | 1        | String    | Number of hours prior to arrival day in which this Cancellation policy applies .                                                                        |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| CancelPenalties/CancelPenalty/Penalty       | 1        |           | Contains the value to apply.                                                                                                                            |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@type*                                     | 1        | String    | Type of penalty Possible values: "Noches" (nights) , "Porcentaje" (percentage) ,"Importe" (price value).                                                |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@paymentType*                              | 1        | String    | Indicates the typology of payment.                                                                                                                      |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| *@currency*                                 | 1        | String    | Currency code.                                                                                                                                          |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| Remarks                                     | 0..1     | String    | Remarks.                                                                                                                                                |
+---------------------------------------------+----------+-----------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

|